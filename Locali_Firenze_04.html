
!DOCTYPE html
html lang=it
head
  meta charset=UTF-8
  meta name=viewport content=width=device-width, initial-scale=1.0
  titleLocali Firenzetitle
  style
    body { font-family Arial, sans-serif; margin 0; padding 20px; background #f5f5f5; }
    h1 { text-align center; margin-bottom 20px; }
    .filters { display flex; flex-wrap wrap; gap 10px; margin-bottom 10px; justify-content center; }
    .filter-buttons { text-align center; margin 10px 0; }
    input, button, select, textarea { padding 10px; border-radius 8px; border 1px solid #ccc; font-size 1em; }
    button { background #ff7e5f; color white; cursor pointer; border none; transition 0.3s; }
    buttonhover { background #eb5757; }
    .list { 
      display grid; 
      grid-template-columns repeat(auto-fit, minmax(300px, 1fr)); 
      gap 10px; 
      max-height 70vh; 
      overflow-y auto; 
      padding-right 5px; 
    }
    .card { 
      background white; padding 15px; border-radius 12px;
      box-shadow 0 4px 8px rgba(0,0,0,0.1); 
      display flex; justify-content space-between; align-items center;
    }
    .card div {
      max-width 220px;
      word-wrap break-word;
      white-space normal;
    }
    .card a { color #0077cc; text-decoration none; }
  .actions {
  display flex;
  flex-direction column;  i bottoni vanno in verticale 
  gap 8px;                spazio verticale tra i bottoni 
  align-items center;     li centra orizzontalmente 
}

    .remove { background #ff4d4d; border none; border-radius 50%; color white; font-weight bold; width 30px; height 30px; cursor pointer; }
    .edit { background #ffa500; border none; border-radius 50%; color white; font-weight bold; width 30px; height 30px; cursor pointer; }
.comment {
  background #ff9966;  puoi cambiare colore 
  border none;
  border-radius 50%;
  color white;
  font-weight bold;
  width 30px;
  height 30px;
  cursor pointer;
}
    .overlay { position fixed; top0; left0; width100%; height100%; backgroundrgba(0,0,0,0.6);
      displaynone; justify-contentcenter; align-itemscenter; }
    .popup { backgroundwhite; padding20px; border-radius10px; max-width300px; text-aligncenter; }
    .menu { position relative; display inline-block; }
    .menu-content {
      display none; position absolute; right0;
      background white; border 1px solid #ccc;
      border-radius 8px; padding 10px;
      box-shadow 0 4px 8px rgba(0,0,0,0.2);
      z-index 100;
    }
    .menu-content button {
      display block; width 100%; margin 5px 0; 
      background #ff7e5f; color white;
    }
    .menu.show .menu-content { display block; }

     --- Dropdown multi-select --- 
    .dropdown { position relative; display inline-block; }
    .dropdown-btn {
      padding 10px;
      border 1px solid #ccc;
      border-radius 8px;
      background white;
      cursor pointer;
      min-width 150px;
    }
    .dropdown-content {
      display none;
      position absolute;
      background white;
      border 1px solid #ccc;
      border-radius 8px;
      padding 10px;
      box-shadow 0 4px 8px rgba(0,0,0,0.2);
      z-index 100;
      max-height 200px;
      overflow-y auto;
    }
    .dropdown.show .dropdown-content { display block; }
    .dropdown-content label { display block; cursor pointer; margin 3px 0; }

    .tipo-wrapper { display flex; align-items center; gap 5px; margin-bottom 5px; }
    .tipo-wrapper button { background #ff4d4d; border-radius 6px; padding 5px 10px; }
.edit, .remove, .comment {
  display flex;
  align-items center;
  justify-content center;
  font-size 16px;
  line-height 1;
  padding 0;
}
  style
head
body
  h1Locali Firenzeh1

  !-- FILTRI --
  div class=filters
    div class=dropdown id=zonaFilterdiv
    div class=dropdown id=tipoFilterdiv
    div class=dropdown id=consigliatoFilterdiv
    div class=dropdown id=glutenFilterdiv
  div
  div class=filter-buttons
    button onclick=filtra()Filtrabuttonbrbr
    button onclick=randomLocale()Casuale üé≤button
button onclick=vaiAlModulo()Aggiungi ‚ûïbutton
    div class=menu
      button onclick=toggleMenu(event)‚ãÆ Altrobutton
     div id=extraMenu class=menu-content
  button onclick=condividiWhatsapp();chiudiMenu()Condividi con un amico üì≤button
div

    div
  div
!-- BARRA DI RICERCA --
div class=filters
  input type=text id=searchInput placeholder=Cerca locale... oninput=cercaPerNome()
div






div id=loader style=
  displaynone;
  positionfixed;
  top0; left0; width100%; height100%;
  backgroundrgba(255,255,255,0.7);
  align-itemscenter; justify-contentcenter;
  z-index9999;
  div class=spinner style=
    border 6px solid #f3f3f3;
    border-top 6px solid #ff7e5f;
    border-radius 50%;
    width 50px;
    height 50px;
    animation spin 1s linear infinite;
  div
div


style
@keyframes spin {
  0% { transform rotate(0deg); }
  100% { transform rotate(360deg); }
}
style








  !-- LISTA --
  div class=list id=listadiv

  !-- FORM AGGIUNTA --
  h2 id=formAggiungiAggiungi Localeh2
  div class=filters
    input type=text id=nome placeholder=Nome locale
    input type=text id=zona placeholder=Zona (es. Santo Spirito)
    div id=tipo-container
      div class=tipo-wrapper
        select class=tipo onchange=aggiornaOpzioniTipo()
          option value=Tipooption
          optionPizzeriaoption
          optionRistoranteoption
          optionAperitivooption
          optionCocktail baroption
	optionPaninotecaoption


        select
      div
      button type=button onclick=aggiungiCampoTipo()+button
    div
    input type=text id=link placeholder=Link Google
    select id=voto
      option value=Votooption
      option1optionoption2optionoption3optionoption4optionoption5option
    select
    select id=glutenFree
      option value=Gluten freeoption
      option value=siS√¨option
      option value=noNooption
    select
    textarea id=commento placeholder=Commento sul locale rows=2 style=width100%;textarea
    button onclick=aggiungi()Aggiungibutton
  div

  !-- POPUP IMPORT --
  div class=overlay id=overlay
    div class=popup
      h3Scegli consiglieri da importareh3
      div id=checkboxesdiv
      button onclick=confermaImport()Importa selezionatibutton
      button onclick=chiudiPopup()Annullabutton
    div
  div

  !-- POPUP LOCALE AGGIUNTO --
  div class=overlay id=popupAggiunto
    div class=popup
      h3Locale aggiunto!h3
      button onclick=chiudiPopupAggiunto()OKbutton
    div
  div

  !-- POPUP COMMENTO --
  div class=overlay id=popupCommento
    div class=popup
      h3Commentoh3
      p id=testoCommentop
      button onclick=chiudiCommento()Chiudibutton
    div
  div

!-- POPUP LOCALE MODIFICATO --
div class=overlay id=popupModificato
  div class=popup
    h3Locale modificato!h3
    button onclick=chiudiPopupModificato()OKbutton
  div
div

!-- POPUP LOCALE CANCELLATO --
div class=overlay id=popupCancellato
  div class=popup
    h3Locale cancellato!h3
    button onclick=chiudiPopupCancellato()OKbutton
  div
div

  script
const SCRIPT_URL = httpsscript.google.commacrossAKfycbyf88jHp8K5e9eZEkoE6mtauZEnpGyiWOAv0rkgLPoPg4MbailJOAPuUuuYjbiVcjUlexec;

    let myName = localStorage.getItem(myName);
    if (!myName) {
      myName = prompt(Inserisci nome e cognome);
      if (myName) localStorage.setItem(myName, myName);
      else myName = Anonimo;
    }

    let locali = [];

    function salva() { localStorage.setItem(locali, JSON.stringify(locali)); }
async function carica() {
  try {
    mostraLoader();
    const res = await fetch(SCRIPT_URL);
    locali = await res.json();
    mostra();
  } catch (err) {
    console.error(Errore caricamento dati, err);
  } finally {
    nascondiLoader();
  }
}

function chiudiPopupModificato() {
  document.getElementById(popupModificato).style.display = none;
}
function condividiWhatsapp() {
  const text = encodeURIComponent(Ciao üëã prova anche tu questa app dei locali di Firenze! üçïüç∑nnhttpsmaurodigirola.github.iolocaliLocali_Firenze_04.html);
  window.open(`httpswa.metext=${text}`, _blank);
}


function chiudiPopupCancellato() {
  document.getElementById(popupCancellato).style.display = none;
}


    const tipiDisponibili = [Pizzeria,Ristorante,Aperitivo,Cocktail bar,Paninoteca];


    function aggiungiCampoTipo() {
      const container = document.getElementById(tipo-container);
      const selects = container.querySelectorAll(select);
      if (selects.length = 4) {
        alert(Puoi aggiungere al massimo 4 tipi);
        return;
      }
      const div = document.createElement(div);
      div.className = tipo-wrapper;
      div.innerHTML = `
        select class=tipo onchange=aggiornaOpzioniTipo()select
        button type=button onclick=rimuoviCampoTipo(this)‚ùåbutton
      `;
      container.insertBefore(div, container.lastElementChild);
      aggiornaOpzioniTipo();
    }
function vaiAlModulo() {
  document.getElementById(formAggiungi).scrollIntoView({ behavior smooth });
}




function mostraLoader() {
  document.getElementById(loader).style.display = flex;
}

function nascondiLoader() {
  document.getElementById(loader).style.display = none;
}





    function rimuoviCampoTipo(btn) {
      btn.parentElement.remove();
      aggiornaOpzioniTipo();
    }

    function aggiornaOpzioniTipo() {
      const selects = document.querySelectorAll(#tipo-container select);
      const selezionati = [...selects].map(s = s.value).filter(v = v);
      selects.forEach(select = {
        const valoreAttuale = select.value;
        select.innerHTML = `option value=Tipooption` +
          tipiDisponibili
            .filter(t = !selezionati.includes(t)  t === valoreAttuale)
            .map(t = `option ${t===valoreAttualeselected}${t}option`)
            .join();
      });
    }

    function creaDropdown(id, titolo, valori) {
      const unici = [...new Set(valori.flatMap(v = v.split(+)))].filter(v = v);
      const div = document.getElementById(id);
      div.innerHTML = `
        div class=dropdown-btn data-titolo=${titolo} onclick=toggleDropdown('${id}', event)${titolo}div
        div class=dropdown-content
          labelinput type=checkbox value=__ALL__ checked onchange=selezionaTutti('${id}', this) Tuttilabel
          ${unici.map(v = `labelinput type=checkbox value=${v} onchange=aggiornaTesto('${id}') ${v}label`).join()}
        div
      `;
    }
 --- Ricerca per nome ---
function cercaPerNome() {
  const query = document.getElementById(searchInput).value.toLowerCase().trim();
  const filtrati = locali.filter(l = l.nome.toLowerCase().includes(query));
  mostra(filtrati);
}

  function aggiornaFiltri() {
  const zone = locali.map(l = l.zona);
  const tipi = locali.map(l = l.tipo);
  const cons = [...new Set(locali.map(l = l.consigliatoDa  ‚Äî))];
  const gf = [si,no];

   aggiungo Miei locali davanti a tutti
  const consWithMine = [Miei locali, ...cons.filter(c = c !== myName)];

  creaDropdown(zonaFilter, Tutte le zone, zone);
  creaDropdown(tipoFilter, Tutti i tipi, tipi);
  creaDropdown(consigliatoFilter, Tutti i consiglieri, consWithMine);
  creaDropdown(glutenFilter, Gluten free, gf);

 }


    function toggleDropdown(id, event) {
      event.stopPropagation();
      document.querySelectorAll(.dropdown).forEach(d = { if (d.id !== id) d.classList.remove(show); });
      document.getElementById(id).classList.toggle(show);
    }

    function aggiornaTesto(id) {
      const btn = document.querySelector(`#${id} .dropdown-btn`);
      const selezionati = getSelezionati(id).filter(v = v !== __ALL__);
      if (selezionati.length === 0) { btn.textContent = btn.dataset.titolo; document.querySelector(`#${id} input[value=__ALL__]`).checked = true; }
      else if (selezionati.length === 1) { btn.textContent = selezionati[0]; document.querySelector(`#${id} input[value=__ALL__]`).checked = false; }
      else { btn.textContent = selezionati.length +  selezionati; document.querySelector(`#${id} input[value=__ALL__]`).checked = false; }
    }
    function selezionaTutti(id) {
      const inputs = document.querySelectorAll(`#${id} .dropdown-content input[type=checkbox]`);
      inputs.forEach(cb = { if (cb.value !== __ALL__) cb.checked = false; });
      aggiornaTesto(id);
    }

    document.addEventListener(click, function(e) {
      if (!e.target.closest(.dropdown)) document.querySelectorAll(.dropdown).forEach(d = d.classList.remove(show));
      if (!e.target.closest(.menu)) document.querySelectorAll(.menu).forEach(m = m.classList.remove(show));
    });

function mostra(lista = locali) {
  aggiornaFiltri();
  const c = document.getElementById(lista);
  c.innerHTML = ;
  lista.forEach((loc) = {
    const idxGlobale = locali.findIndex(x = 
      x.nome === loc.nome &&
      x.zona === loc.zona &&
      (x.consigliatoDa  ‚Äî) === (loc.consigliatoDa  ‚Äî)
    );

    const isOwner = (loc.consigliatoDa  ).trim() === myName.trim();
    const isAdmin = myName.trim() === Mauro Di Girolamo;

    c.innerHTML += `
      div class=card data-idx=${idxGlobale}
        div
          strong${loc.nome}strong ${loc.glutenFree===si  üåæüö´  }br
          Zona ${loc.zona} br
          Tipo ${loc.tipo} br
          Voto ${loc.voto  ‚Äî}br
          Consigliato da ${loc.consigliatoDa  ‚Äî}br
          a href=${loc.link} target=_blankLinka
        div
        div class=actions
          ${
            (isOwner  isAdmin) 
               `
                button class=edit onclick=modifica(${idxGlobale})‚úébutton
                button class=remove onclick=rimuovi(${idxGlobale})√óbutton
              `
               
          }
          ${loc.commento  `button class=comment title=Vedi commento onclick='mostraCommento(${JSON.stringify(loc.commento)})'üí¨button`  }
        div
      div`;
  });
}


async function aggiungi() {
  const nome = document.getElementById(nome).value.trim();
  const zona = document.getElementById(zona).value.trim();
  const tipoElements = document.querySelectorAll(#tipo-container select);
  const tipi = [...tipoElements].map(s = s.value).filter(v = v);
  const link = document.getElementById(link).value.trim();
  const voto = document.getElementById(voto).value;
  const glutenFree = document.getElementById(glutenFree).value;
  const commento = document.getElementById(commento).value.trim();

  if (!nome  !zona  tipi.length === 0) {
    alert(Devi inserire Nome, Zona e almeno un Tipo!);
    return;
  }

  const nuovo = {
    action add,
    nome, zona, tipo tipi.join(+), link, voto,
    consigliatoDa myName, glutenFree, commento
  };

  try {
    mostraLoader();
    await fetch(SCRIPT_URL, {
      method POST,
      body JSON.stringify(nuovo)
    });
    document.getElementById(popupAggiunto).style.display = flex;
    carica();  aggiorna lista

     üîπ pulisci i campi dopo l'aggiunta
    document.getElementById(nome).value = ;
    document.getElementById(zona).value = ;
    document.getElementById(tipo-container).innerHTML = `
      div class=tipo-wrapper
        select class=tipo onchange=aggiornaOpzioniTipo()
          option value=Tipooption
          optionPizzeriaoption
          optionRistoranteoption
          optionAperitivooption
          optionCocktail baroption
          optionPaninotecaoption
        select
      div
      button type=button onclick=aggiungiCampoTipo()+button
    `;
    document.getElementById(link).value = ;
    document.getElementById(voto).value = ;
    document.getElementById(glutenFree).value = ;
    document.getElementById(commento).value = ;

  } catch (err) {
    console.error(Errore invio dati, err);
  } finally {
    nascondiLoader();
  }
}




     --- Modifica ---
function modifica(i) {
  const loc = locali[i];
  const tipi = loc.tipo.split(+); 
  const card = document.querySelector(`.card[data-idx=${i}]`);  qui la differenza

  let tipoHTML = tipi.map((t, idx) = `
    div class=tipo-wrapper
      select class=edit-tipo data-index=${idx}
        option value=Tipooption
        option ${t===Pizzeriaselected}Pizzeriaoption
        option ${t===Ristoranteselected}Ristoranteoption
        option ${t===Aperitivoselected}Aperitivooption
        option ${t===Cocktail barselected}Cocktail baroption
        option ${t===Paninotecaselected}Paninotecaoption
      select
      ${idx0  `button type=button onclick=this.parentElement.remove()‚ùåbutton`  }
    div
  `).join();

  card.innerHTML = `
    div
      labelNomebrinput type=text id=edit-nome-${i} value=${loc.nome}labelbr
      labelZonabrinput type=text id=edit-zona-${i} value=${loc.zona}labelbr
      labelTipobr
        div id=edit-tipo-container-${i}
          ${tipoHTML}
        div
        button type=button onclick=aggiungiCampoTipoEdit(${i})+button
      labelbr
      labelLinkbrinput type=text id=edit-link-${i} value=${loc.link}labelbr
      labelVotobr
        select id=edit-voto-${i}
          option value= ${!loc.votoselected}option
          option value=1 ${loc.voto===1selected}1option
          option value=2 ${loc.voto===2selected}2option
          option value=3 ${loc.voto===3selected}3option
          option value=4 ${loc.voto===4selected}4option
          option value=5 ${loc.voto===5selected}5option
        select
      labelbr
      labelGluten freebr
        select id=edit-gf-${i}
          option value= ${!loc.glutenFreeselected}option
          option value=si ${loc.glutenFree===siselected}S√¨option
          option value=no ${loc.glutenFree===noselected}Nooption
        select
      labelbr
      labelConsigliato dabrinput type=text id=edit-cons-${i} value=${loc.consigliatoDa}labelbr
      labelCommentobrtextarea id=edit-commento-${i} rows=2 style=width100%${loc.commento  }textarealabel
    div
    div class=actions
      button class=edit onclick=salvaModifica(${i})üíæbutton
    div`;
}


function aggiungiCampoTipoEdit(i) {
  const container = document.getElementById(`edit-tipo-container-${i}`);
  const selects = container.querySelectorAll(select);
  if (selects.length = 4) {
    alert(Puoi aggiungere al massimo 4 tipi);
    return;
  }
  const div = document.createElement(div);
  div.className = tipo-wrapper;
  div.innerHTML = `
    select class=edit-tipo
      option value=Tipooption
      optionPizzeriaoption
      optionRistoranteoption
      optionAperitivooption
      optionCocktail baroption
    select
    button type=button onclick=this.parentElement.remove()‚ùåbutton
  `;
  container.appendChild(div);
}

async function salvaModifica(i) {
  const tipoElements = document.querySelectorAll(`#edit-tipo-container-${i} select`);
  const tipi = [...tipoElements].map(s = s.value).filter(v = v);

  const locVecchio = locali[i];  locale originale prima della modifica

  const aggiornato = {
    action update,
    oldNome locVecchio.nome,    üëà aggiungo il vecchio nome
    nome document.getElementById(`edit-nome-${i}`).value,
    zona document.getElementById(`edit-zona-${i}`).value,
    tipo tipi.join(+),
    link document.getElementById(`edit-link-${i}`).value,
    voto document.getElementById(`edit-voto-${i}`).value,
    glutenFree document.getElementById(`edit-gf-${i}`).value,
    consigliatoDa document.getElementById(`edit-cons-${i}`).value,
    commento document.getElementById(`edit-commento-${i}`).value
  };

  try {
    mostraLoader();
    await fetch(SCRIPT_URL, {
      method POST,
      body JSON.stringify(aggiornato)
    });
    nascondiLoader();
    await carica();
    document.getElementById(popupModificato).style.display = flex;
  } catch (err) {
    console.error(Errore aggiornamento dati, err);
    nascondiLoader();
  }
}





     --- Rimuovi ---
async function rimuovi(i) {
  if(confirm(Vuoi eliminare questo locale)) {
    const nome = locali[i].nome;
    try {
      mostraLoader();
      await fetch(SCRIPT_URL, {
        method POST,
        body JSON.stringify({ action delete, nome })
      });
      nascondiLoader();
      await carica();
      document.getElementById(popupCancellato).style.display = flex;
    } catch (err) {
      console.error(Errore eliminazione dati, err);
      nascondiLoader();
    }
  }
}



     --- Commento ---
 --- Commento ---
function mostraCommento(commento) {
  document.getElementById(testoCommento).textContent = commento  Nessun commento;
  document.getElementById(popupCommento).style.display = flex;
}

    function chiudiCommento() {
      document.getElementById(popupCommento).style.display = none;
    }

     --- Filtra ---
    function getSelezionati(id) {
      return [...document.querySelectorAll(`#${id} .dropdown-content inputchecked`)]
        .map(cb = cb.value)
        .filter(v = v !== __ALL__);
    }
   function filtra() {
  const zone = getSelezionati(zonaFilter);
  const tipi = getSelezionati(tipoFilter);
  const cons = getSelezionati(consigliatoFilter);
  const gf = getSelezionati(glutenFilter);

  const f = locali.filter(l =
    (zone.length === 0  zone.includes(l.zona)) &&
    (tipi.length === 0  tipi.some(t = l.tipo.split(+).includes(t))) &&
    (
      cons.length === 0 
      (cons.includes(Miei locali) && l.consigliatoDa === myName) 
      cons.includes(l.consigliatoDa  ‚Äî)
    ) &&
    (gf.length === 0  gf.includes(l.glutenFree))
  );

  mostra(f);
}


     --- Random ---
    function randomLocale() {
      if(locali.length===0){alert(Nessun locale);return;}
      const r = locali[Math.floor(Math.random()locali.length)];
      alert(`Prova ${r.nome} (${r.tipo} in zona ${r.zona})`);
    }

     --- ImportExport ---
    let datiImport = [];
    function importaCSV(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = e = {
        const text = e.target.result.trim();
        const lines = text.split(n).slice(1);
        datiImport = lines.map(line = {
          const values = line.split([,;]).map(v = v.replace(^$g, ).trim());

          if (values.length = 8) {
            const [nome, zona, tipo, link, voto, consigliatoDa, glutenFree, commento] = values;
            return { nome, zona, tipo, link, voto, consigliatoDa consigliatoDa  ‚Äî, glutenFree, commento };
          }
          return null;
        }).filter(x = x);
        const cons = [...new Set(datiImport.map(l=l.consigliatoDa‚Äî))];
        const box = document.getElementById(checkboxes);
        box.innerHTML = cons.map(c=`labelinput type=checkbox value=${c} checked ${c}label`).join();
        document.getElementById(overlay).style.display=flex;
      };
      reader.readAsText(file);
    }
    function confermaImport() {
      const selezionati = [...document.querySelectorAll(#checkboxes inputchecked)].map(cb=cb.value);
      datiImport.forEach(l={
        if (selezionati.includes(l.consigliatoDa‚Äî)) {
          const duplicato = locali.some(ex=ex.nome===l.nome && ex.zona===l.zona && ex.consigliatoDa===l.consigliatoDa);
          if (!duplicato) locali.push(l);
        }
      });
      salva(); mostra(); chiudiPopup();
    }
    function chiudiPopup(){ document.getElementById(overlay).style.display=none; }

     --- CondivisioneReset ---
   function condividiLista() {
  const header = Nome,Zona,Tipo,Link,Voto,ConsigliatoDa,GlutenFree,Commenton;
  const rows = locali.map(l = `${l.nome},${l.zona},${l.tipo},${l.link},${l.voto  },${l.consigliatoDa  },${l.glutenFree  },${l.commento  }`);
  const csv = header + rows.join(n);
  const filename = locali_ + myName.replace(s+g, _) + .csv;
  const blob = new Blob([csv], { type textcsv });

  if (navigator.canShare && navigator.canShare({ files [new File([blob], filename, { type textcsv })] })) {
    const file = new File([blob], filename, { type textcsv });
    navigator.share({
      files [file],
      title Lista Locali,
      text Ecco la mia lista di locali üìé
    }).catch(err = console.log(Condivisione annullata, err));
  } else {
    const a = document.createElement(a);
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    a.click();
    URL.revokeObjectURL(a.href);

  }
}

    function richiediLista() {
      const text = encodeURIComponent(Ciao üëã puoi condividere con me la tua lista locali);
      window.open(`httpswa.metext=${text}`, _blank);
    }
    function resetLista() {
      if (confirm(Vuoi davvero resettare la lista ai valori iniziali)) {
        localStorage.removeItem(locali); location.reload();
      }
    }

     --- Menu ---
    function toggleMenu(event) {
      event.stopPropagation(); document.querySelector(.menu).classList.toggle(show);
    }
    function chiudiMenu() {
      document.querySelector(.menu).classList.remove(show);
    }
function chiudiPopupAggiunto() {
  document.getElementById(popupAggiunto).style.display = none;
}
    carica(); 
  script
body
html
